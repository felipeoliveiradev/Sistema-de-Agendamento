if (self.CavalryLogger) { CavalryLogger.start_js(["UaF3t"]); }

__d("react-relay-deprecated/classic/legacy/store/GraphQLRange",["invariant","react-relay-deprecated/classic/mutation/rangeOperationToMetadataKey","react-relay-deprecated/classic/query/serializeRelayQueryCall","react-relay-deprecated/classic/store/RelayRecord","react-relay-deprecated/classic/legacy/store/GraphQLSegment","forEachObject","relay-runtime","warning"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("relay-runtime").ConnectionInterface,i=b("relay-runtime").RangeOperations;function j(a){__p&&__p();var b={};for(var c=0;c<a.length;c++)if(h.isConnectionCall(a[c])){var d=a[c],e=d.value;Array.isArray(e)&&e.length&&(e=e[0]);if(e===null)continue;b[d.name]=e}b.first?(isNaN(b.first)&&g(0,4593,b.first),b.first=+b.first):b.last&&(isNaN(b.last)&&g(0,4594,b.last),b.last=+b.last);return b}function k(a){return Object.prototype.hasOwnProperty.call(a,"surrounds")||Object.prototype.hasOwnProperty.call(a,"find")}function l(a){var b=Object.prototype.hasOwnProperty.call(a,"first");a=Object.prototype.hasOwnProperty.call(a,"last");return(b||a)&&!(b&&a)}function m(a){return Object.prototype.hasOwnProperty.call(a,"first")&&a.first>0||Object.prototype.hasOwnProperty.call(a,"last")&&a.last>0}function n(a){b("react-relay-deprecated/classic/store/RelayRecord").getDataIDForObject(a)!==void 0||g(0,4595),a.node!==void 0||g(0,4596)}function o(a){a.forEach(n)}function p(){this.reset()}p.prototype.reset=function(){this.$1=[new(b("react-relay-deprecated/classic/legacy/store/GraphQLSegment"))(),new(b("react-relay-deprecated/classic/legacy/store/GraphQLSegment"))()],this.$2={},this.$3=!1,this.$4=!1};p.prototype.$5=function(a){a>=0&&a<this.$1.length||g(0,4597),this.$1[a]=new(b("react-relay-deprecated/classic/legacy/store/GraphQLSegment"))()};p.prototype.$6=function(a){var b=null;for(var c=0;c<this.$1.length;c++)if(this.$1[c].containsEdgeWithCursor(a))return c;else this.$1[c].containsEdgeWithCursor(a,!0)&&(b=c);return b};p.prototype.$7=function(a){for(var b=0;b<this.$1.length;b++)if(this.$1[b].containsEdgeWithID(a))return b;return null};p.prototype.$8=function(a,c){a=q(a);var d=[],e=[];for(var f=0;f<c.length;f++){var g=c[f];d.push(b("react-relay-deprecated/classic/store/RelayRecord").getDataIDForObject(g));e.push(g.cursor)}this.$2[a]={edgeIDs:d,cursors:e}};p.prototype.addItems=function(a,c,d){__p&&__p();o(c);var e=j(a),f,g;if(k(e)){this.$8(a,c);return}if(!l(e))return;if(e.before===null||e.after===null)return;a=h.get();var i=a.HAS_NEXT_PAGE;a=a.HAS_PREV_PAGE;e.first?e.before&&!e.after?d[i]===!0&&c.length!==0?(this.$6(e.before)===0&&this.$1.unshift(new(b("react-relay-deprecated/classic/legacy/store/GraphQLSegment"))()),this.$9(c,d[i],void 0,e.before)):this.$10(c,d[a],e.before):(e.after||(g=0,f=this.getFirstSegment().getCount(),f&&(e.first>f||c.length>f)&&!this.getFirstSegment().getFirstCursor()&&this.$5(g)),this.$9(c,d[i],e.after,e.before)):e.last&&(e.after&&!e.before?d[a]===!0&&c.length!==0?(this.$6(e.after)===this.$1.length-1&&this.$1.push(new(b("react-relay-deprecated/classic/legacy/store/GraphQLSegment"))()),this.$10(c,d[a],void 0,e.after)):this.$9(c,d[i],e.after):(e.before||(g=this.$1.length-1,f=this.getLastSegment().getCount(),f&&(e.last>f||c.length>f)&&!this.getLastSegment().getLastCursor()&&this.$5(g)),this.$10(c,d[a],e.before,e.after)))};p.prototype.getFirstSegment=function(){return this.$1[0]};p.prototype.getLastSegment=function(){return this.$1[this.$1.length-1]};p.prototype.$11=function(a){a+1<this.$1.length&&a>=0||g(0,4598);var b=this.$1[a],c=this.$1[a+1];b.concatSegment(c)&&this.$1.splice(a+1,1)};p.prototype.prependEdge=function(a){n(a);this.$3=!0;this.$12(a);var b=this.getFirstSegment();b.prependEdge(a)};p.prototype.appendEdge=function(a){n(a);this.$4=!0;this.$12(a);var b=this.getLastSegment();b.appendEdge(a)};p.prototype.$12=function(a){a=b("react-relay-deprecated/classic/store/RelayRecord").getDataIDForObject(a);var c=this.$7(a);c!=null&&this.$1[c].removeEdge(a)};p.prototype.$13=function(a){return a.filter(function(a){a=b("react-relay-deprecated/classic/store/RelayRecord").getDataIDForObject(a);return this.$7(a)==null}.bind(this))};p.prototype.$9=function(a,c,d,e){__p&&__p();var f,g,h;if(d!==void 0){g=this.$6(d);if(g==null){b("warning")(!1,"GraphQLRange cannot find a segment that has the cursor: %s",d);return}f=this.$1[g];h=f.getLastCursor();if(h!==d){a=this.$14(f,a,d);d=h;if(!a)return}}else{g=0;f=this.$1[g];h=f.getLastCursor();if(h!==void 0){a=this.$14(f,a);d=h;if(!a)return}}h=this.$1[g+1];if(e!==void 0)if(g===this.$1.length-1)return;else if(!h.isFirstCursor(e)){b("warning")(!1,"GraphQLRange cannot add because beforeCursor does not match first cursor of the next segment");return}d===void 0&&(this.$3=!0);h=this.$13(a);f.addEdgesAfterCursor(h,d);c||(e!==void 0?this.$11(g):(this.$4=!0,this.$1.splice(g+1,this.$1.length-1-g)))};p.prototype.$14=function(a,c,d){__p&&__p();a=a.getMetadataAfterCursor(c.length+1,d);d=a.edgeIDs;if(d.length>c.length)return void 0;for(var a=0;a<d.length;a++)if(d[a]!==b("react-relay-deprecated/classic/store/RelayRecord").getDataIDForObject(c[a])){b("warning")(!1,"Relay was unable to reconcile edges on a connection. This most likely occurred while trying to handle a server response that includes connection edges with nodes that lack an `id` field.");return void 0}return c.slice(d.length)};p.prototype.$10=function(a,c,d,e){__p&&__p();var f,g,h;if(d!==void 0){g=this.$6(d);if(g==null){b("warning")(!1,"GraphQLRange cannot find a segment that has the cursor: %s",d);return}f=this.$1[g];h=f.getFirstCursor();if(h!==d){a=this.$15(f,a,d);d=h;if(!a)return}}else{g=this.$1.length-1;f=this.$1[g];h=f.getFirstCursor();if(h!==void 0){a=this.$15(f,a,d);d=h;if(!a)return}}h=this.$1[g-1];if(e!==void 0)if(g===0)return;else if(!h.isLastCursor(e)){b("warning")(!1,"GraphQLRange cannot add because afterCursor does not match last cursor of the previous segment");return}d===void 0&&(this.$4=!0);h=this.$13(a);f.addEdgesBeforeCursor(h,d);c||(e!==void 0?this.$11(g-1):(this.$3=!0,this.$1.splice(0,g)))};p.prototype.$15=function(a,c,d){__p&&__p();a=a.getMetadataBeforeCursor(c.length+1,d);d=a.edgeIDs;if(d.length>c.length)return void 0;for(var a=1;a<=d.length;a++)if(d[d.length-a]!==b("react-relay-deprecated/classic/store/RelayRecord").getDataIDForObject(c[c.length-a])){b("warning")(!1,"Relay was unable to reconcile edges on a connection. This most likely occurred while trying to handle a server response that includes connection edges with nodes that lack an `id` field.");return void 0}return c.slice(0,c.length-d.length)};p.prototype.removeEdgeWithID=function(a){for(var b=0;b<this.$1.length;b++)this.$1[b].removeAllEdges(a)};p.prototype.retrieveRangeInfoForQuery=function(a,b){__p&&__p();var c=j(a);if(k(c))return this.$16(a);if(!l(c))return{requestedEdgeIDs:[],diffCalls:[],pageInfo:h.getDefaultPageInfo()};if(c.first&&c.before||c.last&&c.after)return{requestedEdgeIDs:[],diffCalls:[],pageInfo:h.getDefaultPageInfo()};if(!m(c))return{requestedEdgeIDs:[],diffCalls:[],pageInfo:h.getDefaultPageInfo()};if(c.first)return this.$17(a,b);else if(c.last)return this.$18(a,b)};p.prototype.$16=function(a){var b=q(a);b=this.$2[b];if(b){var c,d=h.get(),e=d.END_CURSOR,f=d.HAS_NEXT_PAGE,g=d.HAS_PREV_PAGE;d=d.START_CURSOR;return{requestedEdgeIDs:b.edgeIDs,diffCalls:[],pageInfo:(c={},c[d]=b.cursors[0],c[e]=b.cursors[b.cursors.length-1],c[f]=!0,c[g]=!0,c)}}return{requestedEdgeIDs:[],diffCalls:a,pageInfo:h.getDefaultPageInfo()}};p.prototype.$19=function(a){return a[b("react-relay-deprecated/classic/mutation/rangeOperationToMetadataKey")[i.APPEND]]};p.prototype.$20=function(a){return a[b("react-relay-deprecated/classic/mutation/rangeOperationToMetadataKey")[i.REMOVE]]};p.prototype.$21=function(a){return a[b("react-relay-deprecated/classic/mutation/rangeOperationToMetadataKey")[i.PREPEND]]};p.prototype.$17=function(a,b){__p&&__p();var c=h.get(),d=c.END_CURSOR,e=c.HAS_NEXT_PAGE;c=c.START_CURSOR;var f,g,i;b&&(f=this.$19(b),g=this.$21(b),i=this.$20(b));a=j(a);var k=a.first+(i?i.length:0),l,m,n=babelHelpers["extends"]({},h.getDefaultPageInfo()),o=a.after;if(o!==void 0){m=this.$6(o);if(m==null)return{requestedEdgeIDs:[],diffCalls:[],pageInfo:n};l=this.$1[m]}else{var p=g?g.length:0;k-=p;m=0;l=this.$1[m]}p=l.getMetadataAfterCursor(k,o);o=p.edgeIDs;p=p.cursors;var q=[];p.length&&(n[c]=p[0],n[d]=p[p.length-1]);c=o[o.length-1];if(!this.$4||m!==this.$1.length-1||c&&c!==l.getLastID()){n[e]=!0;if(o.length<k){k-=o.length;d=l.getLastCursor();if(d===null)q.push({name:"first",value:a.first});else{d!==void 0&&q.push({name:"after",value:d});if(m!==this.$1.length-1){p=this.$1[m+1];c=p.getFirstCursor();c!==void 0&&q.push({name:"before",value:c})}q.push({name:"first",value:k})}}}b&&(g&&g.length&&!a.after&&(o=g.concat(o)),f&&f.length&&!n[e]&&(o=o.concat(f)),i&&i.length&&(o=o.filter(function(a){return i.indexOf(a)===-1})),o.length>a.first&&(o=o.slice(0,a.first)));return{requestedEdgeIDs:o,diffCalls:q,pageInfo:n}};p.prototype.$18=function(a,b){__p&&__p();var c=h.get(),d=c.END_CURSOR,e=c.HAS_PREV_PAGE;c=c.START_CURSOR;var f,g,i;b&&(f=this.$19(b),g=this.$21(b),i=this.$20(b));a=j(a);var k=a.last+(i?i.length:0),l,m,n=babelHelpers["extends"]({},h.getDefaultPageInfo()),o=a.before;if(o!==void 0){m=this.$6(o);if(m==null)return{requestedEdgeIDs:[],diffCalls:[],pageInfo:n};l=this.$1[m]}else{var p=f?f.length:0;k-=p;m=this.$1.length-1;l=this.$1[m]}p=l.getMetadataBeforeCursor(k,o);o=p.edgeIDs;p=p.cursors;var q=[];p.length&&(n[c]=p[0],n[d]=p[p.length-1]);c=o[0];if(!this.$3||m!==0||c&&c!==l.getFirstID()){n[e]=!0;if(o.length<k){k-=o.length;d=l.getFirstCursor();if(d===null)q.push({name:"last",value:a.last});else{d!==void 0&&q.push({name:"before",value:d});if(m!==0){p=this.$1[m-1];c=p.getLastCursor();c!==void 0&&q.push({name:"after",value:c})}q.push({name:"last",value:k})}}}if(b){f&&f.length&&!a.before&&(o=o.concat(f));g&&g.length&&!n[e]&&(o=g.concat(o));i&&i.length&&(o=o.filter(function(a){return i.indexOf(a)===-1}));if(o.length>a.last){l=o.length;o=o.slice(l-a.last,l)}}return{requestedEdgeIDs:o,diffCalls:q,pageInfo:n}};p.fromJSON=function(a){var c=a[0],d=a[1],e=a[2];a=a[3];var f=new p();f.$3=c;f.$4=d;f.$2=e;f.$1=a.map(function(a){return b("react-relay-deprecated/classic/legacy/store/GraphQLSegment").fromJSON(a)});return f};p.prototype.toJSON=function(){return[this.$3,this.$4,this.$2,this.$1]};p.prototype.__debug=function(){return{orderedSegments:this.$1}};p.prototype.getEdgeIDs=function(){var a=[];this.$1.forEach(function(b){a.push.apply(a,b.getEdgeIDs())});b("forEachObject")(this.$2,function(b){a.push.apply(a,b.edgeIDs)});return a};p.prototype.getSegmentedEdgeIDs=function(){return this.$1.map(function(a){return a.getEdgeIDs()})};function q(a){return a.map(function(a){return b("react-relay-deprecated/classic/query/serializeRelayQueryCall")(a).substring(1)}).join(",")}e.exports=p}),null);