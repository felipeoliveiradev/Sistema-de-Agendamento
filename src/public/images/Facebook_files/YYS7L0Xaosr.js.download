if (self.CavalryLogger) { CavalryLogger.start_js(["p7HXe"]); }

__d("react-relay-deprecated/classic/store/RelayCacheProcessor",["invariant","react-relay-deprecated/classic/query/forEachRootCallArg","react-relay-deprecated/classic/query/RelayQuery","react-relay-deprecated/classic/query/RelayQueryVisitor","isEmpty","warning"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=babelHelpers.inherits(a,b("react-relay-deprecated/classic/query/RelayQueryVisitor"));h=c&&c.prototype;function a(a,b){h.constructor.call(this),this.$RelayCacheProcessor1=a,this.$RelayCacheProcessor2=b,this.$RelayCacheProcessor3={},this.$RelayCacheProcessor4={},this.$RelayCacheProcessor5="PENDING"}a.prototype.abort=function(){b("warning")(this.$RelayCacheProcessor5==="LOADING","RelayCacheProcessor: Can only abort an in-progress read operation."),this.$RelayCacheProcessor5="COMPLETED"};a.prototype.handleFailure=function(a){this.$RelayCacheProcessor5!=="COMPLETED"||g(0,5148),this.$RelayCacheProcessor5="COMPLETED",this.$RelayCacheProcessor2.onFailure&&this.$RelayCacheProcessor2.onFailure(a)};a.prototype.handleNodeVisited=function(a,b,c,d){return};a.prototype.handleIdentifiedRootVisited=function(a,b,c,d){return};a.prototype.process=function(a){this.$RelayCacheProcessor5==="PENDING"||g(0,5149),this.$RelayCacheProcessor5="LOADING",a(),this.$RelayCacheProcessor6()&&this.$RelayCacheProcessor7()};a.prototype.queueIdentifiedRoot=function(a,b,c){__p&&__p();var d=a.getStorageKey();this.$RelayCacheProcessor1.readRootCall(d,b||"",function(e,f){__p&&__p();if(this.$RelayCacheProcessor5==="COMPLETED")return;if(e){this.handleFailure(e);return}this.handleIdentifiedRootVisited(a,f,b,c);e=this.$RelayCacheProcessor8(d,b);f=this.$RelayCacheProcessor4[e];delete this.$RelayCacheProcessor4[e];for(var e=0;e<f.length;e++){if(this.$RelayCacheProcessor5==="COMPLETED")return;this.traverse(f[e],c)}this.$RelayCacheProcessor6()&&this.$RelayCacheProcessor7()}.bind(this))};a.prototype.queueNode=function(a,b,c){__p&&__p();this.$RelayCacheProcessor1.readNode(b,function(d,e){__p&&__p();if(this.$RelayCacheProcessor5==="COMPLETED")return;if(d){this.handleFailure(d);return}this.handleNodeVisited(a,b,e,c);d=this.$RelayCacheProcessor3[b];delete this.$RelayCacheProcessor3[b];for(var e=0;e<d.length;e++){if(this.$RelayCacheProcessor5==="COMPLETED")return;this.traverse(a,d[e])}this.$RelayCacheProcessor6()&&this.$RelayCacheProcessor7()}.bind(this))};a.prototype.visitIdentifiedRoot=function(a,b,c){var d=a.getStorageKey();d=this.$RelayCacheProcessor8(d,b);Object.prototype.hasOwnProperty.call(this.$RelayCacheProcessor4,d)?this.$RelayCacheProcessor4[d].push(a):(this.$RelayCacheProcessor4[d]=[a],this.queueIdentifiedRoot(a,b,c))};a.prototype.visitNode=function(a,b,c){Object.prototype.hasOwnProperty.call(this.$RelayCacheProcessor3,b)?this.$RelayCacheProcessor3[b].push(c):(this.$RelayCacheProcessor3[b]=[c],this.queueNode(a,b,c))};a.prototype.visitRoot=function(a,c){b("react-relay-deprecated/classic/query/forEachRootCallArg")(a,function(b){b=b.identifyingArgKey;if(this.$RelayCacheProcessor5==="COMPLETED")return;this.visitIdentifiedRoot(a,b,c)}.bind(this))};a.prototype.$RelayCacheProcessor8=function(a,b){return a+"*"+(b||"")};a.prototype.$RelayCacheProcessor7=function(){this.$RelayCacheProcessor5!=="COMPLETED"||g(0,5148),this.$RelayCacheProcessor5="COMPLETED",this.$RelayCacheProcessor2.onSuccess&&this.$RelayCacheProcessor2.onSuccess()};a.prototype.$RelayCacheProcessor6=function(){return b("isEmpty")(this.$RelayCacheProcessor4)&&b("isEmpty")(this.$RelayCacheProcessor3)&&this.$RelayCacheProcessor5==="LOADING"};e.exports=a}),null);