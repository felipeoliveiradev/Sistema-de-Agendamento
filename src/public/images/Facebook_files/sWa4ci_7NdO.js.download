if (self.CavalryLogger) { CavalryLogger.start_js(["XTh5i"]); }

__d("react-relay-deprecated/classic/legacy/store/GraphQLSegment",["react-relay-deprecated/classic/store/RelayRecord"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(){this.$1={},this.$2={},this.$3={},this.$4=0,this.$5=null,this.$6=null}g.prototype.$7=function(a){return this.$3[a]};g.prototype.$8=function(a){a=this.$2[a];return a&&a[0]};g.prototype.getFirstCursor=function(){if(this.getLength())for(var a=this.$5;a<=this.$6;a++){var b=this.$1[a];if(!b.deleted)return b.cursor}};g.prototype.getLastCursor=function(){if(this.getLength())for(var a=this.$6;a>=this.$5;a--){var b=this.$1[a];if(!b.deleted)return b.cursor}};g.prototype.isFirstCursor=function(a){__p&&__p();if(this.getLength()){for(var b=this.$5;b<=this.$6;b++){var c=this.$1[b];if(!c.deleted)return c.cursor===a;else if(c.cursor===a)return!0}return!1}};g.prototype.isLastCursor=function(a){__p&&__p();if(this.getLength()){for(var b=this.$6;b>=this.$5;b--){var c=this.$1[b];if(!c.deleted)return c.cursor===a;else if(c.cursor===a)return!0}return!1}};g.prototype.getFirstID=function(){if(this.getLength())for(var a=this.$5;a<=this.$6;a++){var b=this.$1[a];if(!b.deleted)return b.edgeID}};g.prototype.getLastID=function(){if(this.getLength())for(var a=this.$6;a>=this.$5;a--){var b=this.$1[a];if(!b.deleted)return b.edgeID}};g.prototype.$9=function(a){a=this.$1[a];return a&&!a.deleted?a:null};g.prototype.containsEdgeWithID=function(a){a=this.$8(a);return a===void 0?!1:!!this.$9(a)};g.prototype.containsEdgeWithCursor=function(a,b){b===void 0&&(b=!1);a=this.$7(a);if(a===void 0)return!1;else if(b)return!0;return!!this.$9(a)};g.prototype.getMetadataAfterCursor=function(a,b){__p&&__p();if(!this.getLength())return{edgeIDs:[],cursors:[]};var c=this.$5;if(b){b=this.$7(b);if(b===void 0)return{edgeIDs:[],cursors:[]};c=b+1}b=0;var d=[],e=[];while(c<=this.$6&&b<a){var f=this.$1[c];f.deleted||(d.push(f.edgeID),e.push(f.cursor),b++);c++}return{edgeIDs:d,cursors:e}};g.prototype.getMetadataBeforeCursor=function(a,b){__p&&__p();if(!this.getLength())return{edgeIDs:[],cursors:[]};var c=this.$6;if(b){b=this.$7(b);if(b===void 0)return{edgeIDs:[],cursors:[]};c=b-1}b=0;var d=[],e=[];while(c>=this.$5&&b<a){var f=this.$1[c];f.deleted||(d.push(f.edgeID),e.push(f.cursor),b++);c--}return{edgeIDs:d.reverse(),cursors:e.reverse()}};g.prototype.$10=function(a,c){__p&&__p();var d=b("react-relay-deprecated/classic/store/RelayRecord").getDataIDForObject(a);a=a.cursor;var e=this.$8(d);if(e!==void 0&&this.$9(e))return;if(this.getLength()===0)this.$5=c,this.$6=c;else if(this.$5===c+1)this.$5=c;else if(this.$6===c-1)this.$6=c;else return;this.$1[c]={edgeID:d,cursor:a,deleted:!1};this.$2[d]=this.$2[d]||[];this.$2[d].unshift(c);this.$4++;a&&(this.$3[a]=c)};g.prototype.prependEdge=function(a){this.$10(a,this.$5!==null?this.$5-1:0)};g.prototype.appendEdge=function(a){this.$10(a,this.$6!==null?this.$6+1:0)};g.prototype.removeEdge=function(a){a=this.$8(a);if(a===void 0)return;a=this.$1[a];if(a.deleted)return;a.deleted=!0;this.$4--};g.prototype.removeAllEdges=function(a){a=this.$2[a];if(!a)return;for(var b=0;b<a.length;b++){var c=this.$1[a[b]];c.deleted||(c.deleted=!0,this.$4--)}};g.prototype.addEdgesAfterCursor=function(a,b){__p&&__p();if(!a.length)return;var c=-1;if(b){c=this.$7(b);if(c===void 0)return}while(this.$6!==null&&c<this.$6){b=this.$1[c+1];if(b.deleted)c++;else return}b=c+1;for(var c=0;c<a.length;c++){var d=a[c];this.$10(d,b+c)}};g.prototype.addEdgesBeforeCursor=function(a,b){__p&&__p();if(!a.length)return;var c=1;if(b){c=this.$7(b);if(c===void 0)return}while(this.$5!==null&&c>this.$5){b=this.$1[c-1];if(b.deleted)c--;else return}b=c-1;for(var c=0;c<a.length;c++){var d=a[a.length-c-1];this.$10(d,b-c)}};g.prototype.getLength=function(){return this.$5===null&&this.$6===null?0:this.$6-this.$5+1};g.prototype.getCount=function(){return this.$4};g.prototype.$11=function(a,b,c){Object.assign(this.$3,a),Object.assign(this.$2,b),this.$4=c.count,this.$6=c.maxIndex,this.$5=c.minIndex};g.prototype.$12=function(){return{count:this.$4,maxIndex:this.$6,minIndex:this.$5}};g.prototype.concatSegment=function(a){__p&&__p();if(!a.getLength())return!0;var b={},c={},d=this.$12(),e=a.$1;for(var f=a.$5;f<=a.$6;f++){var g=void 0;this.getLength()?g=this.$6+1:(g=0,this.$5=0);this.$6=g;var h=e[f],i=this.$8(h.edgeID);Object.prototype.hasOwnProperty.call(b,h.edgeID)||(this.$2[h.edgeID]?b[h.edgeID]=this.$2[h.edgeID].slice():b[h.edgeID]=void 0);if(i!==void 0){i=this.$1[i];if(i.deleted&&!h.deleted)this.$2[h.edgeID].unshift(g);else if(!h.deleted){this.$11(c,b,d);return!1}else this.$2[h.edgeID]=this.$2[h.edgeID]||[],this.$2[h.edgeID].push(g)}else this.$2[h.edgeID]=this.$2[h.edgeID]||[],this.$2[h.edgeID].unshift(g);i=this.$7(h.cursor);if(i!==void 0){i=this.$1[i];if(i.deleted&&!h.deleted)c[h.cursor]=this.$3[h.cursor],this.$3[h.cursor]=g;else if(!h.deleted){this.$11(c,b,d);return!1}}else h.cursor&&(c[h.cursor]=this.$3[h.cursor],this.$3[h.cursor]=g);h.deleted||this.$4++;this.$1[g]=Object.assign({},h)}return!0};g.prototype.toJSON=function(){return[this.$1,this.$2,this.$3,this.$5,this.$6,this.$4]};g.fromJSON=function(a){__p&&__p();var b=a[0],c=a[1],d=a[2],e=a[3],f=a[4];a=a[5];var h=new g();h.$1=b;h.$2=c;h.$3=d;h.$5=e;h.$6=f;h.$4=a;return h};g.prototype.__debug=function(){return{metadata:this.$1,idToIndices:this.$2,cursorToIndex:this.$3}};g.prototype.getEdgeIDs=function(a){__p&&__p();a=a===void 0?{includeDeleted:!1}:a;a=a.includeDeleted;var b=[];if(this.getLength()>0)for(var c=this.$5;c<=this.$6;c++){var d=this.$1[c],e=d.deleted;d=d.edgeID;(a||!e)&&b.push(d)}return b};e.exports=g}),null);