if (self.CavalryLogger) { CavalryLogger.start_js(["7gYhg"]); }

__d("UFI2CreateCommentSubscription",["FBLogger","RelayModern","RelayRuntime","SiteData","UFI2FeedbackSubscriptionTopicProvider","WebCommentViewOption","gkx","UFI2CreateCommentSubscription.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();b("RelayModern").graphql;var g=b("RelayModern").requestSubscription,h=b("RelayRuntime").ConnectionHandler,i=b("SiteData").pr,j=function(){return b("UFI2CreateCommentSubscription.graphql")};b("UFI2FeedbackSubscriptionTopicProvider").registerProvider(j,"gqls/comment_create_subscribe/top_level_feedback_id_");function a(a){__p&&__p();var c=a.commentProfilePictureSizeDepth0,d=a.commentProfilePictureSizeDepth1,e=a.containerMapping,f=a.environment,k=a.feedbackSource,l=a.onCompleted,m=a.onNext,n=a.subscriptionTargetID,o=a.topLevelFeedbackTargetID;a=a.useDefaultActor;function p(a){b("FBLogger")("ufi2").addMetadata("UFI","FEEDBACK_TARGET_ID",o||"UNKNOWN").warn(a)}b("UFI2FeedbackSubscriptionTopicProvider").addSubscriptionTargetIDForFeedbackID(o,n);return g(f,{onCompleted:l,onNext:m,subscription:j,updater:function(a,c){__p&&__p();var d=a.getRootField("comment_create_subscribe");if(d==null){p("could not find comment create subscription payload");return}var e=d.getLinkedRecord("feedback");if(e==null){p("could not find feedback target in payload");return}var f=e.getDataID();if(f==null){p("could not get feedback target id");return}var g=a.get(f);if(g==null){p("could not find feedback record");return}Object.keys(b("WebCommentViewOption")).concat(null).forEach(function(b){__p&&__p();b=h.getConnection(g,"UFI2CommentsProvider_feedback_display_comments",b?{feedback_source:k,view_option:b}:{feedback_source:k});if(!b)return;var c=d.getLinkedRecord("feedback_comment_edge");if(c==null){p("could not find comment edge");return}var f=c.getLinkedRecord("node");if(f==null){p("could not find comment node");return}var i=b.getLinkedRecords("edges");if(i==null){p("could not find comment edges");return}var j=!1;for(var i=i,l=Array.isArray(i),m=0,i=l?i:i[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var n;if(l){if(m>=i.length)break;n=i[m++]}else{m=i.next();if(m.done)break;n=m.value}n=n;n=n&&n.getLinkedRecord("node");if(n==null){p("could not find edge node");continue}if(n.getDataID()===f.getDataID()){j=!0;break}}if(j)return;n=b.getValue("before_count")||0;if(typeof n!=="number"){p("expected `before_count` to be a number");return}m=h.createEdge(a,b,f,c.getType());if(m==null){p("could not build comment edge");return}h.insertEdgeBefore(b,m);f.setValue(!0,"is_created_from_subscription");l=e.getLinkedRecord("display_comments");if(l==null){p("could not get display_comments from payload");return}i=l.getValue("count");if(i==null){p("could not get display_comments count from payload");return}b.setValue(i,"count")});f=[(f=c.comment_create_subscribe)==null?void 0:(f=f.feedback_comment_edge)==null?void 0:(f=f.node)==null?void 0:(f=f.author)==null?void 0:(f=f.profile_picture_depth_0)==null?void 0:f.uri,(f=c.comment_create_subscribe)==null?void 0:(f=f.feedback_comment_edge)==null?void 0:(f=f.node)==null?void 0:(f=f.author)==null?void 0:(f=f.profile_picture_depth_1)==null?void 0:f.uri];if(f[0]==null||f[1]==null){b("FBLogger")("ufi2").addMetadata("UFI","FEEDBACK_TARGET_ID",o||"UNKNOWN").addMetadata("UFI","COMMENT_ID",(c=(f=c.comment_create_subscribe)==null?void 0:(c=f.feedback_comment_edge)==null?void 0:(f=c.node)==null?void 0:f.id)!=null?c:"UNKNOWN").warn("Profile photo missing on live comment")}},variables:babelHelpers["extends"]({},e,{commentProfilePictureSizeDepth0:c,commentProfilePictureSizeDepth1:d,feedbackSource:k,input:{top_level_feedback_id:o},isComet:b("gkx")("708253"),scale:i,useDefaultActor:a})})}e.exports={subscribe:a}}),null);
__d("XAdStudyPowerCalculatorController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ads/lift/power_calc/",{})}),null);