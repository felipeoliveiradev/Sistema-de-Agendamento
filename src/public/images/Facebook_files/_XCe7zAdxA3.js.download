if (self.CavalryLogger) { CavalryLogger.start_js(["BNpwP"]); }

__d("react-relay-deprecated/classic/traversal/writeRelayUpdatePayload",["invariant","react-relay-deprecated/classic/interface/RelayNodeInterface","react-relay-deprecated/classic/legacy/store/generateClientEdgeID","react-relay-deprecated/classic/legacy/store/generateClientID","react-relay-deprecated/classic/mutation/getRangeBehavior","react-relay-deprecated/classic/query/RelayQuery","react-relay-deprecated/classic/query/RelayQueryPath","react-relay-deprecated/classic/store/RelayClassicRecordState","react-relay-deprecated/classic/store/RelayMutationTracker","relay-runtime","warning"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("relay-runtime").ConnectionInterface,i=b("relay-runtime").MutationTypes;c=b("relay-runtime").RangeOperations;d=b("relay-runtime").RelayProfiler;var j=b("react-relay-deprecated/classic/interface/RelayNodeInterface").ANY_TYPE,k=b("react-relay-deprecated/classic/interface/RelayNodeInterface").ID,l=b("react-relay-deprecated/classic/interface/RelayNodeInterface").NODE,m=c.APPEND,n=c.IGNORE,o=c.PREPEND,p=c.REFETCH,q=c.REMOVE,r;function s(){r||(r=b("react-relay-deprecated/classic/query/RelayQuery").Field.build({fieldName:h.get().EDGES,type:j,metadata:{canHaveSubselections:!0,isPlural:!0}}));return r}var t="client:cursor";function a(a,b,c,d){__p&&__p();var e=d.configs,f=d.isOptimisticUpdate;e.forEach(function(d){switch(d.type){case i.NODE_DELETE:u(a,c,d);break;case i.RANGE_ADD:y(a,c,b,d,f);break;case i.RANGE_DELETE:A(a,c,d);break;case i.FIELDS_CHANGE:case i.REQUIRED_CHILDREN:break;default:}});w(a,c,b)}function u(a,b,c){b=b[c.deletedIDFieldName];if(!b)return;Array.isArray(b)?b.forEach(function(b){v(a,b)}):v(a,b)}function v(a,c){__p&&__p();var d=a.getRecordStore(),e=a.getRecordWriter(),f=d.getRecordState(c);if(f===b("react-relay-deprecated/classic/store/RelayClassicRecordState").NONEXISTENT)return;f=d.getConnectionIDsForRecord(c);f&&f.forEach(function(d){var f=b("react-relay-deprecated/classic/legacy/store/generateClientEdgeID")(d,c);e.applyRangeUpdate(d,f,q);a.recordUpdate(f);a.recordUpdate(d);v(a,f)});e.deleteRecord(c);a.recordUpdate(c)}function w(a,b,c){var d=a.getRecordStore();for(var e in b){if(!Object.prototype.hasOwnProperty.call(b,e))continue;var f=b[e];if(typeof f!=="object"||f==null)continue;(k in f||d.getDataID(e)||Array.isArray(f))&&x(a,e,f,c)}}function x(a,c,d,e){__p&&__p();var f=h.get();f=f.CLIENT_MUTATION_ID;if(c==="error"||c===f)return;if(Array.isArray(d)){d.forEach(function(b){typeof b==="object"&&b!=null&&!Array.isArray(b)&&(D(b,k)&&x(a,c,b,e))});return}var i=d;f=a.getRecordStore();var l=D(i,k),m;l!=null?m=b("react-relay-deprecated/classic/query/RelayQueryPath").createForID(l,"writeRelayUpdatePayload"):(l=f.getDataID(c),l||g(0,387,c,Object.keys(d).join(", "),e.getName()),m=b("react-relay-deprecated/classic/query/RelayQueryPath").create(b("react-relay-deprecated/classic/query/RelayQuery").Root.build("writeRelayUpdatePayload",c,null,null,{identifyingArgName:null,identifyingArgType:null,isAbstract:!0,isDeferred:!1,isPlural:!1},j)));f=function d(e){e.getChildren().forEach(function(e){e instanceof b("react-relay-deprecated/classic/query/RelayQuery").Fragment?d(e):e instanceof b("react-relay-deprecated/classic/query/RelayQuery").Field&&e.getSerializationKey()===c&&(m&&l&&(a.createRecordIfMissing(e,l,m,i),a.writePayload(e,l,i,m)))})};f(e)}function y(a,c,d,e,f){__p&&__p();var i=h.get();i=i.CLIENT_MUTATION_ID;var j=D(c,i);j||g(0,388,d.getName(),i);i=a.getRecordStore();c=E(c,e.edgeName);var m=c&&E(c,l);if(!c||!m)return;var n=e.parentID;if(!n){var o=E(c,"source");o&&(n=D(o,k))}n||g(0,389,e.edgeName);var p=D(m,k)||b("react-relay-deprecated/classic/legacy/store/generateClientID")();o=c.cursor||t;var q=babelHelpers["extends"]({},c,{cursor:o,node:babelHelpers["extends"]({},m,{id:p})});c=i.getConnectionIDsForField(n,e.connectionName);c&&c.forEach(function(b){return z(a,d,e,b,p,q)});if(f)b("react-relay-deprecated/classic/store/RelayMutationTracker").putClientIDForMutation(p,j);else{o=b("react-relay-deprecated/classic/store/RelayMutationTracker").getClientIDForMutation(j);o&&(b("react-relay-deprecated/classic/store/RelayMutationTracker").updateClientServerIDMap(o,p),b("react-relay-deprecated/classic/store/RelayMutationTracker").deleteClientIDForMutation(j))}}function z(a,c,d,e,f,h){__p&&__p();var i=a.getRecordStore(),j=a.getRecordWriter(),k=i.getRangeFilterCalls(e);k=k?b("react-relay-deprecated/classic/mutation/getRangeBehavior")(d.rangeBehaviors,k):null;if(!k){b("warning")(k,"Using `null` as a rangeBehavior value is deprecated. Use `ignore` to avoid refetching a range.");return}if(k===n)return;var l=b("react-relay-deprecated/classic/legacy/store/generateClientEdgeID")(e,f),r=i.getPathToRecord(e);r||g(0,390,e);f=s();r=b("react-relay-deprecated/classic/query/RelayQueryPath").getPath(r,f,l);a.createRecordIfMissing(f,l,r,h);i=!1;f=function c(e){e.getChildren().forEach(function(e){e instanceof b("react-relay-deprecated/classic/query/RelayQuery").Fragment?c(e):e instanceof b("react-relay-deprecated/classic/query/RelayQuery").Field&&e.getSchemaName()===d.edgeName&&(i=!0,r&&a.writePayload(e,l,h,r))})};f(c);i||g(0,391,d.edgeName);(k===m||k===n||k===o||k===p||k===q)&&(j.applyRangeUpdate(e,l,k),a.recordUpdate(e))}function A(a,c,d){__p&&__p();var e=a.getRecordStore(),f=null;Array.isArray(d.deletedIDFieldName)?f=C(e,d.deletedIDFieldName,c):(f=c[d.deletedIDFieldName],typeof f==="number"&&(b("warning")(!1,"writeRelayUpdatePayload(): Expected `%s` to be a string, got the number `%s`.",d.deletedIDFieldName,f),f=""+f),f==null||!Array.isArray(f)||typeof f!=="string"||g(0,392,d.deletedIDFieldName,JSON.stringify(f)),Array.isArray(f)||(f=[f]));f!=null||g(0,393,d.deletedIDFieldName);var h=d.pathToConnection.pop();c=C(e,d.pathToConnection,c);d.pathToConnection.push(h);if(!c)return;d=c[0];c=e.getConnectionIDsForField(d,h);c&&c.forEach(function(b){f&&f.forEach(function(c){B(a,b,c)})})}function B(a,c,d){var e=a.getRecordWriter();d=b("react-relay-deprecated/classic/legacy/store/generateClientEdgeID")(c,d);e.applyRangeUpdate(c,d,q);v(a,d);a.recordUpdate(c)}function C(a,b,c){__p&&__p();if(b.length===1){a=a.getDataID(b[0]);if(a)return[a]}var d=c;b.forEach(function(a,c){if(!d||Array.isArray(d))return;c===b.length-1?d=F(d,a):d=E(d,a)});if(d){Array.isArray(d)||(d=[d]);return d.map(function(a){a=D(a,k);a!=null||g(0,394,b.join("."));return a})}return null}function D(a,c){a=a[c];typeof a==="number"&&(b("warning")(!1,"writeRelayUpdatePayload(): Expected `%s` to be a string, got the number `%s`.",c,a),a=""+a);a==null||typeof a==="string"||g(0,395,c,JSON.stringify(a));return a}function E(a,b){a=a[b];a==null||typeof a==="object"&&!Array.isArray(a)||g(0,396,b,JSON.stringify(a));return a}function F(a,b){a=a[b];a==null||typeof a==="object"||g(0,397,b,JSON.stringify(a));return a}e.exports=d.instrument("writeRelayUpdatePayload",a)}),null);