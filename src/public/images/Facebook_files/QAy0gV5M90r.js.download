if (self.CavalryLogger) { CavalryLogger.start_js(["pkVXm"]); }

__d("OzNetworkRequestStreamHandler",["invariant","createErrorStream","oz-player/networks/createNetworkError","oz-player/networks/OzTransformStream"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function a(a){this.$1=a}a.prototype.onResponse=function(a){__p&&__p();return function(c){__p&&__p();var d=c.body,e=c.headers,f=c.status;c=c.ok;e&&e.has("x-fb-video-replica")&&(c=!1,f=417);if(!c)return b("createErrorStream")(b("oz-player/networks/createNetworkError")(new Error("HTTP status not OK"),f,e,a,"HTTP error."));d.getReader||g(0,3287);if(!this.$1.getBool("throw_network_error_during_stream",!1))return d;c=new(b("oz-player/networks/OzTransformStream"))({errorTransform:function(c){return c instanceof TypeError?b("oz-player/networks/createNetworkError")(c,0,null,a,"Network failure."):c}});return d.pipeThrough(c)}.bind(this)};a.prototype.onError=function(a){return function(c){if(c instanceof TypeError)return b("createErrorStream")(b("oz-player/networks/createNetworkError")(c,0,null,a,"Network failure."));throw c}};e.exports=a}),null);