if (self.CavalryLogger) { CavalryLogger.start_js(["p\/S5c"]); }

__d("react-relay-deprecated/classic/store/RelayStoreData",["invariant","react-relay-deprecated/classic/interface/RelayNodeInterface","react-relay-deprecated/classic/legacy/store/generateForceIndex","react-relay-deprecated/classic/legacy/store/GraphQLQueryRunner","react-relay-deprecated/classic/legacy/store/GraphQLRange","react-relay-deprecated/classic/legacy/store/GraphQLStoreChangeEmitter","react-relay-deprecated/classic/legacy/store/GraphQLStoreRangeUtils","react-relay-deprecated/classic/mutation/RelayMutationQueue","react-relay-deprecated/classic/network/RelayNetworkLayer","react-relay-deprecated/classic/query/QueryBuilder","react-relay-deprecated/classic/query/RelayQuery","react-relay-deprecated/classic/query/RelayQueryPath","react-relay-deprecated/classic/route/RelayMetaRoute","react-relay-deprecated/classic/tools/RelayTaskQueue","react-relay-deprecated/classic/traversal/writeRelayQueryPayload","react-relay-deprecated/classic/traversal/writeRelayUpdatePayload","react-relay-deprecated/classic/store/RelayChangeTracker","react-relay-deprecated/classic/store/RelayClassicRecordState","react-relay-deprecated/classic/store/RelayPendingQueryTracker","react-relay-deprecated/classic/store/RelayQueryTracker","react-relay-deprecated/classic/store/RelayQueryWriter","react-relay-deprecated/classic/store/RelayRecord","react-relay-deprecated/classic/store/RelayRecordStore","react-relay-deprecated/classic/store/RelayRecordWriter","react-relay-deprecated/classic/store/restoreRelayCacheData","forEachObject","mapObject","nullthrows","relay-runtime","react-relay-deprecated/classic/store/RelayStoreConstants"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("react-relay-deprecated/classic/store/restoreRelayCacheData").restoreFragmentDataFromCache,i=b("react-relay-deprecated/classic/store/restoreRelayCacheData").restoreQueriesDataFromCache,j=b("relay-runtime").ConnectionInterface,k=b("relay-runtime").RelayProfiler,l=b("react-relay-deprecated/classic/interface/RelayNodeInterface").ID,m=b("react-relay-deprecated/classic/interface/RelayNodeInterface").ID_TYPE,n=b("react-relay-deprecated/classic/interface/RelayNodeInterface").NODE,o=b("react-relay-deprecated/classic/interface/RelayNodeInterface").NODE_TYPE;a=b("react-relay-deprecated/classic/interface/RelayNodeInterface").TYPENAME;var p=b("react-relay-deprecated/classic/store/RelayStoreConstants").ROOT_ID,q=b("react-relay-deprecated/classic/store/RelayClassicRecordState").EXISTENT,r=b("react-relay-deprecated/classic/query/RelayQuery").Field.build({fieldName:l,type:"String"}),s=b("react-relay-deprecated/classic/query/RelayQuery").Field.build({fieldName:a,type:"String"});function t(a,c,d,e,f,g,h){a===void 0&&(a={}),c===void 0&&(c={}),d===void 0&&(d={}),e===void 0&&(e={}),f===void 0&&(f={}),g===void 0&&(g={}),h===void 0&&(h=new(b("react-relay-deprecated/classic/legacy/store/GraphQLStoreRangeUtils"))()),this.$1=null,this.$2=a,this.$3=c,this.$4=new(b("react-relay-deprecated/classic/store/RelayRecordStore"))({cachedRecords:a,records:e},{cachedRootCallMap:c,rootCallMap:f},g),this.$5=new(b("react-relay-deprecated/classic/legacy/store/GraphQLStoreChangeEmitter"))(h),this.$6=new(b("react-relay-deprecated/classic/mutation/RelayMutationQueue"))(this),this.$7=new(b("react-relay-deprecated/classic/network/RelayNetworkLayer"))(),this.$8=g,this.$9=new(b("react-relay-deprecated/classic/store/RelayPendingQueryTracker"))(this),this.$15=new(b("react-relay-deprecated/classic/legacy/store/GraphQLQueryRunner"))(this),this.$14=new(b("react-relay-deprecated/classic/store/RelayQueryTracker"))(),this.$11=d,this.$12=new(b("react-relay-deprecated/classic/store/RelayRecordStore"))({cachedRecords:a,queuedRecords:d,records:e},{cachedRootCallMap:c,rootCallMap:f},g),this.$10=e,this.$13=new(b("react-relay-deprecated/classic/store/RelayRecordStore"))({records:e},{rootCallMap:f},g),this.$16=h,this.$17=f,this.$18=new(b("react-relay-deprecated/classic/tools/RelayTaskQueue"))()}t.prototype.injectQueryTracker=function(a){this.$14=a};t.prototype.injectTaskScheduler=function(a){this.$18.injectScheduler(a)};t.prototype.injectCacheManager=function(a){this.$1=a};t.prototype.clearCacheManager=function(){this.$1=null};t.prototype.hasCacheManager=function(){return!!this.$1};t.prototype.getCacheManager=function(){return this.$1};t.prototype.hasOptimisticUpdate=function(a){a=this.getRangeData().getCanonicalClientID(a);return this.getQueuedStore().hasOptimisticUpdate(a)};t.prototype.getClientMutationIDs=function(a){a=this.getRangeData().getCanonicalClientID(a);return this.getQueuedStore().getClientMutationIDs(a)};t.prototype.restoreQueriesFromCache=function(a,c){var d=this.$1;d||g(0,19);var e=new(b("react-relay-deprecated/classic/store/RelayChangeTracker"))(),f=k.profile("RelayStoreData.readFromDiskCache");return i(a,this.$12,this.$2,this.$3,d,e,{onSuccess:function(){this.$19(e.getChangeSet()),f.stop(),c.onSuccess&&c.onSuccess()}.bind(this),onFailure:function(){this.$19(e.getChangeSet()),f.stop(),c.onFailure&&c.onFailure()}.bind(this)})};t.prototype.restoreFragmentFromCache=function(a,c,d,e){var f=this.$1;f||g(0,20);var i=new(b("react-relay-deprecated/classic/store/RelayChangeTracker"))(),j=k.profile("RelayStoreData.readFragmentFromDiskCache");return h(a,c,d,this.$12,this.$2,this.$3,f,i,{onSuccess:function(){this.$19(i.getChangeSet()),j.stop(),e.onSuccess&&e.onSuccess()}.bind(this),onFailure:function(){this.$19(i.getChangeSet()),j.stop(),e.onFailure&&e.onFailure()}.bind(this)})};t.prototype.handleOSSQueryPayload=function(a,c,d){__p&&__p();var e=k.profile("RelayStoreData.handleQueryPayload"),f=new(b("react-relay-deprecated/classic/store/RelayChangeTracker"))(),g=this.getRecordWriter(),h=new(b("react-relay-deprecated/classic/store/RelayQueryWriter"))(this.$12,g,this.$14,f,{forceIndex:d,updateTrackedQueries:!0});v(a,c).forEach(function(c){__p&&__p();var d=c.field,e=c.root;c=c.rootPayload;b("react-relay-deprecated/classic/traversal/writeRelayQueryPayload")(h,e,c);var i=b("react-relay-deprecated/classic/query/RelayQueryPath").getRootRecordPath();g.putRecord(p,a.getType(),i);this.$12.getRecordState(p)!==q?f.createID(p):f.updateID(p);var j=[];b("react-relay-deprecated/classic/interface/RelayNodeInterface").getResultsFromPayload(e,c).forEach(function(a){a.result;a=a.rootCallInfo;var b=a.storageKey;a=a.identifyingArgKey;b=g.getDataID(b,a);b!=null&&j.push(b)});i=d.getStorageKey();if(d.isPlural())g.putLinkedRecordIDs(p,i,j);else{e=j[0];e!=null?g.putLinkedRecordID(p,i,e):g.putField(p,i,null)}}.bind(this));this.$19(f.getChangeSet());e.stop()};t.prototype.handleQueryPayload=function(a,c,d){var e=k.profile("RelayStoreData.handleQueryPayload"),f=new(b("react-relay-deprecated/classic/store/RelayChangeTracker"))();d=new(b("react-relay-deprecated/classic/store/RelayQueryWriter"))(this.$12,this.getRecordWriter(),this.$14,f,{forceIndex:d,updateTrackedQueries:!0});b("react-relay-deprecated/classic/traversal/writeRelayQueryPayload")(d,a,c);this.$19(f.getChangeSet());e.stop()};t.prototype.handleFragmentPayload=function(a,c,d,e,f){var g=k.profile("RelayStoreData.handleFragmentPayload"),h=new(b("react-relay-deprecated/classic/store/RelayChangeTracker"))();f=new(b("react-relay-deprecated/classic/store/RelayQueryWriter"))(this.$12,this.getRecordWriter(),this.$14,h,{forceIndex:f,updateTrackedQueries:!0});f.createRecordIfMissing(c,a,d,e);f.writePayload(c,a,e,d);this.$19(h.getChangeSet());g.stop()};t.prototype.handleUpdatePayload=function(a,c,d){__p&&__p();var e=d.configs;d=d.isOptimisticUpdate;var f=k.profile("RelayStoreData.handleUpdatePayload"),h=new(b("react-relay-deprecated/classic/store/RelayChangeTracker"))();if(d){var i=j.get();i=i.CLIENT_MUTATION_ID;var l=c[i];typeof l==="string"||g(0,21,i);i=this.getRecordWriterForOptimisticMutation(l)}else i=this.$20();l=new(b("react-relay-deprecated/classic/store/RelayQueryWriter"))(this.$12,i,this.$14,h,{forceIndex:b("react-relay-deprecated/classic/legacy/store/generateForceIndex")(),isOptimisticUpdate:d,updateTrackedQueries:!1});b("react-relay-deprecated/classic/traversal/writeRelayUpdatePayload")(l,a,c,{configs:e,isOptimisticUpdate:d});this.$19(h.getChangeSet());f.stop()};t.prototype.buildFragmentQueryForDataID=function(a,c){if(b("react-relay-deprecated/classic/store/RelayRecord").isClientID(c)){var d=this.$12.getPathToRecord(this.$16.getCanonicalClientID(c));d||g(0,22,c);return b("react-relay-deprecated/classic/query/RelayQueryPath").getQuery(this.$4,d,a)}return b("react-relay-deprecated/classic/query/RelayQuery").Root.build(a.getDebugName()||"UnknownQuery",n,c,[r,s,a],{identifyingArgName:l,identifyingArgType:m,isAbstract:!0,isDeferred:!1,isPlural:!1},o)};t.prototype.getNodeData=function(){return this.$10};t.prototype.getQueuedData=function(){return this.$11};t.prototype.clearQueuedData=function(){b("forEachObject")(this.$11,function(a,b){delete this.$11[b],this.$5.broadcastChangeForID(b)}.bind(this))};t.prototype.getCachedData=function(){return this.$2};t.prototype.getMutationQueue=function(){return this.$6};t.prototype.getNetworkLayer=function(){return this.$7};t.prototype.getCachedStore=function(){return this.$4};t.prototype.getQueuedStore=function(){return this.$12};t.prototype.getRecordStore=function(){return this.$13};t.prototype.getRecordWriter=function(){return new(b("react-relay-deprecated/classic/store/RelayRecordWriter"))(this.$10,this.$17,!1,this.$8,this.$1?this.$1.getQueryWriter():null)};t.prototype.getQueryTracker=function(){return this.$14};t.prototype.getQueryRunner=function(){return this.$15};t.prototype.getChangeEmitter=function(){return this.$5};t.prototype.getRangeData=function(){return this.$16};t.prototype.getPendingQueryTracker=function(){return this.$9};t.prototype.getTaskQueue=function(){return this.$18};t.prototype.getRootCallData=function(){return this.$17};t.prototype.$21=function(){return Object.keys(this.$10).length===0&&Object.keys(this.$11).length===0&&Object.keys(this.$2).length===0};t.prototype.$19=function(a){var b=Object.keys(a.updated);a=Object.keys(a.created);b.forEach(function(a){return this.$5.broadcastChangeForID(a)}.bind(this));a.forEach(function(a){this.$5.broadcastChangeForID(a)}.bind(this))};t.prototype.$20=function(){return new(b("react-relay-deprecated/classic/store/RelayRecordWriter"))(this.$10,this.$17,!1,this.$8,this.$1?this.$1.getMutationWriter():null)};t.prototype.getRecordWriterForOptimisticMutation=function(a){return new(b("react-relay-deprecated/classic/store/RelayRecordWriter"))(this.$11,this.$17,!0,this.$8,null,a)};t.prototype.toJSON=function(){var a=function(a){return!a?null:b("mapObject")(a,function(a){a=babelHelpers["extends"]({},a);delete a[b("react-relay-deprecated/classic/store/RelayRecord").MetadataKey.PATH];return a})};return{cachedRecords:a(this.$2),cachedRootCallMap:this.$3,queuedRecords:a(this.$11),records:a(this.$10),rootCallMap:this.$17,nodeRangeMap:this.$8}};t.fromJSON=function(a){a||g(0,23);var b=a.cachedRecords,c=a.cachedRootCallMap,d=a.queuedRecords,e=a.records,f=a.rootCallMap;a=a.nodeRangeMap;u(b);u(d);u(e);return new t(b,c,d,e,f,a)};function u(a){for(var c in a){var d=a[c],e=d.__range__;e&&(d.__range__=b("react-relay-deprecated/classic/legacy/store/GraphQLRange").fromJSON(e))}}function v(a,c){__p&&__p();var d=[];a.getChildren().forEach(function(e){__p&&__p();e=e;if(!(e instanceof b("react-relay-deprecated/classic/query/RelayQuery").Field)||!e.canHaveSubselections())return;var f=b("nullthrows")(b("react-relay-deprecated/classic/query/QueryBuilder").getField(e.getConcreteQueryNode())),g,h,i=f.calls&&f.calls[0];i&&(g=i.name,h=i.metadata&&i.metadata.type);i={calls:f.calls,children:f.children,directives:[],fieldName:f.fieldName,isDeferred:!1,kind:"Query",metadata:{identifyingArgName:g,identifyingArgType:h,isAbstract:f.metadata&&f.metadata.isAbstract,isPlural:f.metadata&&f.metadata.isPlural},name:a.getName(),type:e.getType()};f=b("react-relay-deprecated/classic/query/RelayQuery").Root.create(i,b("react-relay-deprecated/classic/route/RelayMetaRoute").get("$RelayEnvironment"),a.getVariables());i=e.getSerializationKey();var j={};if(!Object.prototype.hasOwnProperty.call(c,i))return;j[f.getFieldName()]=c[i];d.push({field:e,root:f,rootPayload:j})});return d}k.instrumentMethods(t.prototype,{handleQueryPayload:"RelayStoreData.prototype.handleQueryPayload",handleUpdatePayload:"RelayStoreData.prototype.handleUpdatePayload"});e.exports=t}),null);