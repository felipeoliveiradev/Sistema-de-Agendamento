if (self.CavalryLogger) { CavalryLogger.start_js(["we8hm"]); }

__d("react-relay-deprecated/classic/store/restoreRelayCacheData",["invariant","react-relay-deprecated/classic/query/RelayQuery","react-relay-deprecated/classic/query/RelayQueryPath","react-relay-deprecated/classic/traversal/findRelayQueryLeaves","react-relay-deprecated/classic/store/RelayCacheProcessor","react-relay-deprecated/classic/store/RelayRecord","forEachObject","relay-runtime"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;d=b("relay-runtime").RelayProfiler;function a(a,b,c,d,e,f,g,h,j){var k=new i(g,d,e,f,h,j);k.restoreFragmentData(a,b,c);return{abort:function(){k.abort()}}}function c(a,b,c,d,e,f,g){var h=new i(e,b,c,d,f,g);h.restoreQueriesData(a);return{abort:function(){h.abort()}}}f=babelHelpers.inherits(i,b("react-relay-deprecated/classic/store/RelayCacheProcessor"));h=f&&f.prototype;function i(a,b,c,d,e,f){h.constructor.call(this,a,f),this.$RelayCachedDataRestorator1=c,this.$RelayCachedDataRestorator2=d,this.$RelayCachedDataRestorator3=e,this.$RelayCachedDataRestorator4=b}i.prototype.handleNodeVisited=function(a,c,d,e){a=this.$RelayCachedDataRestorator4.getRecordState(c);this.$RelayCachedDataRestorator1[c]=d;a==="UNKNOWN"&&d!==void 0?this.$RelayCachedDataRestorator3.createID(c):a==="EXISTENT"&&d!=null&&this.$RelayCachedDataRestorator3.updateID(c);if(!d){this.handleFailure();return}b("react-relay-deprecated/classic/store/RelayRecord").isClientID(c)&&(d.__path__=e.path)};i.prototype.handleIdentifiedRootVisited=function(a,b,c,d){if(b==null){this.handleFailure();return}a=a.getStorageKey();this.$RelayCachedDataRestorator2[a]=this.$RelayCachedDataRestorator2[a]||{};this.$RelayCachedDataRestorator2[a][c||""]=b;d.dataID=b};i.prototype.restoreFragmentData=function(a,b,c){this.process(function(){this.visitFragment(b,{dataID:a,node:b,path:c,rangeCalls:void 0})}.bind(this))};i.prototype.restoreQueriesData=function(a){this.process(function(){b("forEachObject")(a,function(a){if(this.$RelayCachedDataRestorator5==="COMPLETED")return;a&&this.visitRoot(a,{dataID:void 0,node:a,path:b("react-relay-deprecated/classic/query/RelayQueryPath").create(a),rangeCalls:void 0})}.bind(this))}.bind(this))};i.prototype.traverse=function(a,c){__p&&__p();c.dataID!=null||g(0,3513);a=b("react-relay-deprecated/classic/traversal/findRelayQueryLeaves")(this.$RelayCachedDataRestorator4,this.$RelayCachedDataRestorator1,c.node,c.dataID,c.path,c.rangeCalls);c=a.missingData;a=a.pendingNodeStates;if(c){this.handleFailure();return}for(var c=0;c<a.length;c++){if(this.$RelayCachedDataRestorator5==="COMPLETED")return;a[c].dataID!=null||g(0,3514);this.visitNode(a[c].node,a[c].dataID,a[c])}};i.prototype.visitIdentifiedRoot=function(a,c,d){var e=this.$RelayCachedDataRestorator4.getDataID(a.getStorageKey(),c);e==null?h.visitIdentifiedRoot.call(this,a,c,d):this.traverse(a,{dataID:e,node:a,path:b("react-relay-deprecated/classic/query/RelayQueryPath").create(a),rangeCalls:void 0})};d.instrumentMethods(i.prototype,{handleIdentifiedRootVisited:"RelayCachedDataRestorator.handleIdentifiedRootVisited",handleNodeVisited:"RelayCachedDataRestorator.handleNodeVisited",queueIdentifiedRoot:"RelayCachedDataRestorator.queueRoot",queueNode:"RelayCachedDataRestorator.queueNode",restoreFragmentData:"RelayCachedDataRestorator.readFragment",restoreQueriesData:"RelayCachedDataRestorator.read",traverse:"RelayCachedDataRestorator.traverse",visitNode:"RelayCachedDataRestorator.visitNode",visitRoot:"RelayCachedDataRestorator.visitRoot"});e.exports={restoreFragmentDataFromCache:a,restoreQueriesDataFromCache:c}}),null);