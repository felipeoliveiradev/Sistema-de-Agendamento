if (self.CavalryLogger) { CavalryLogger.start_js(["cx3S9"]); }

__d("react-relay-deprecated/classic/legacy/store/GraphQLQueryRunner",["react-relay-deprecated/classic/store/RelayFetchMode","react-relay-deprecated/classic/store/RelayReadyState","react-relay-deprecated/classic/traversal/checkRelayQueryData","react-relay-deprecated/classic/traversal/diffRelayQuery","react-relay-deprecated/classic/traversal/flattenSplitRelayQueries","react-relay-deprecated/classic/traversal/splitDeferredRelayQueries","react-relay-deprecated/classic/util/throwFailedPromise","react-relay-deprecated/classic/legacy/store/generateForceIndex","everyObject","forEachObject","mapObject","relay-runtime","resolveImmediate","someObject","warning"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("relay-runtime").RelayProfiler;function a(a){this.$1=a}a.prototype.run=function(a,c,d){d===void 0&&(d=b("react-relay-deprecated/classic/store/RelayFetchMode").CLIENT);return j(this.$1,a,c,d)};a.prototype.forceFetch=function(a,c){var d=b("react-relay-deprecated/classic/store/RelayFetchMode").REFETCH;return j(this.$1,a,c,d)};function h(a){return!!Object.keys(a).length}function i(a,c){if(!a.getNetworkLayer().supports("defer"))return c;var d=[];c.forEach(function(a){return d.push.apply(d,b("react-relay-deprecated/classic/traversal/flattenSplitRelayQueries")(b("react-relay-deprecated/classic/traversal/splitDeferredRelayQueries")(a)))});return d}function j(a,c,d,e){__p&&__p();var f=e===b("react-relay-deprecated/classic/store/RelayFetchMode").REFETCH?g.profile("GraphQLQueryRunner.forceFetch"):g.profile("GraphQLQueryRunner.primeCache"),j=new(b("react-relay-deprecated/classic/store/RelayReadyState"))(d),k={},l={};function m(a){__p&&__p();a=a.getQuery();var c=a.getID();delete k[c];a.isDeferred()||delete l[c];if(h(l))return;if(b("someObject")(k,function(a){return a.isResolvable()}))return;h(k)?j.update({done:!1,ready:!0,stale:!1},[{type:"NETWORK_QUERY_RECEIVED_REQUIRED"}]):j.update({done:!0,ready:!0,stale:!1},[{type:"NETWORK_QUERY_RECEIVED_ALL"}])}function n(a,b){j.update({error:b},[{type:"NETWORK_QUERY_ERROR",error:b}])}function o(c){return b("react-relay-deprecated/classic/traversal/checkRelayQueryData")(a.getQueuedStore(),c.getQuery())}b("react-relay-deprecated/classic/util/throwFailedPromise")(a.getTaskQueue().enqueue(function(){__p&&__p();var d=e===b("react-relay-deprecated/classic/store/RelayFetchMode").REFETCH?b("react-relay-deprecated/classic/legacy/store/generateForceIndex")():null,g=[];e===b("react-relay-deprecated/classic/store/RelayFetchMode").CLIENT?b("forEachObject")(c,function(c){c&&g.push.apply(g,b("react-relay-deprecated/classic/traversal/diffRelayQuery")(c,a.getRecordStore(),a.getQueryTracker()))}):b("forEachObject")(c,function(a){a&&g.push(a)});var p=i(a,g),q=[];p.length&&q.push({type:"NETWORK_QUERY_START"});p.forEach(function(b){var c=a.getPendingQueryTracker().add({query:b,fetchMode:e,forceIndex:d,storeData:a}),f=b.getID();k[f]=c;b.isDeferred()||(l[f]=c);c.getResolvedPromise().then(m.bind(null,c),n.bind(null,c))});!h(k)?j.update({done:!0,ready:!0},[].concat(q,[{type:"STORE_FOUND_ALL"}])):!h(l)?j.update({ready:!0},[].concat(q,[{type:"STORE_FOUND_REQUIRED"}])):(j.update({ready:!1},[].concat(q,[{type:"CACHE_RESTORE_START"}])),b("resolveImmediate")(function(){if(a.hasCacheManager()){var c=b("mapObject")(l,function(a){return a.getQuery()});a.restoreQueriesFromCache(c,{onSuccess:function(){j.update({ready:!0,stale:!0},[{type:"CACHE_RESTORED_REQUIRED"}])},onFailure:function(a){j.update({error:a},[{type:"CACHE_RESTORE_FAILED",error:a}])}})}else b("everyObject")(l,o)&&h(l)?j.update({ready:!0,stale:!0},[{type:"CACHE_RESTORED_REQUIRED"}]):j.update({},[{type:"CACHE_RESTORE_FAILED"}])}));f.stop()}));return{abort:function(){j.update({aborted:!0},[{type:"ABORT"}])}}}e.exports=a}),null);